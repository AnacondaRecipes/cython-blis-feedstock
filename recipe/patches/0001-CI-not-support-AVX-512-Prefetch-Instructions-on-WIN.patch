From 31e216f83b4cba6307a00d26a1d7f44abd1d93f6 Mon Sep 17 00:00:00 2001
From: Andrii Osipov <aosipov@anaconda.com>
Date: Mon, 8 Sep 2025 09:11:30 -0700
Subject: [PATCH] CI not support AVX-512 Prefetch Instructions on WIN

---
 blis/_src/make/windows-x86_64.jsonl | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/blis/_src/make/windows-x86_64.jsonl b/blis/_src/make/windows-x86_64.jsonl
index 63166e0..ddccd30 100644
--- a/blis/_src/make/windows-x86_64.jsonl
+++ b/blis/_src/make/windows-x86_64.jsonl
@@ -14,10 +14,10 @@
 {"compiler": "gcc", "source": "kernels/skx/3/bli_dgemm_skx_asm_16x12_l2.c", "target": "obj/x86_64/kernels/skx/3/bli_dgemm_skx_asm_16x12_l2.o", "flags": ["-O3", "-mavx512f", "-mavx512dq", "-mavx512bw", "-mavx512vl", "-mfpmath=sse", "-march=skylake-avx512", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
 {"compiler": "gcc", "source": "kernels/skx/3/bli_dgemm_skx_asm_16x14.c", "target": "obj/x86_64/kernels/skx/3/bli_dgemm_skx_asm_16x14.o", "flags": ["-O3", "-mavx512f", "-mavx512dq", "-mavx512bw", "-mavx512vl", "-mfpmath=sse", "-march=skylake-avx512", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
 {"compiler": "gcc", "source": "kernels/skx/3/bli_sgemm_skx_asm_32x12_l2.c", "target": "obj/x86_64/kernels/skx/3/bli_sgemm_skx_asm_32x12_l2.o", "flags": ["-O3", "-mavx512f", "-mavx512dq", "-mavx512bw", "-mavx512vl", "-mfpmath=sse", "-march=skylake-avx512", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
-{"compiler": "gcc", "source": "kernels/knl/1m/bli_dpackm_knl_asm_24x8.c", "target": "obj/x86_64/kernels/knl/1m/bli_dpackm_knl_asm_24x8.o", "flags": ["-O3", "-mavx512f", "-mavx512pf", "-mfpmath=sse", "-march=knl", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
-{"compiler": "gcc", "source": "kernels/knl/1m/bli_spackm_knl_asm_24x16.c", "target": "obj/x86_64/kernels/knl/1m/bli_spackm_knl_asm_24x16.o", "flags": ["-O3", "-mavx512f", "-mavx512pf", "-mfpmath=sse", "-march=knl", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
-{"compiler": "gcc", "source": "kernels/knl/3/bli_dgemm_knl_asm_24x8.c", "target": "obj/x86_64/kernels/knl/3/bli_dgemm_knl_asm_24x8.o", "flags": ["-O3", "-mavx512f", "-mavx512pf", "-mfpmath=sse", "-march=knl", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
-{"compiler": "gcc", "source": "kernels/knl/3/bli_sgemm_knl_asm_24x16.c", "target": "obj/x86_64/kernels/knl/3/bli_sgemm_knl_asm_24x16.o", "flags": ["-O3", "-mavx512f", "-mavx512pf", "-mfpmath=sse", "-march=knl", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
+{"compiler": "gcc", "source": "kernels/knl/1m/bli_dpackm_knl_asm_24x8.c", "target": "obj/x86_64/kernels/knl/1m/bli_dpackm_knl_asm_24x8.o", "flags": ["-O3", "-mavx512f", "-mfpmath=sse", "-march=knl", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
+{"compiler": "gcc", "source": "kernels/knl/1m/bli_spackm_knl_asm_24x16.c", "target": "obj/x86_64/kernels/knl/1m/bli_spackm_knl_asm_24x16.o", "flags": ["-O3", "-mavx512f", "-mfpmath=sse", "-march=knl", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
+{"compiler": "gcc", "source": "kernels/knl/3/bli_dgemm_knl_asm_24x8.c", "target": "obj/x86_64/kernels/knl/3/bli_dgemm_knl_asm_24x8.o", "flags": ["-O3", "-mavx512f", "-mfpmath=sse", "-march=knl", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
+{"compiler": "gcc", "source": "kernels/knl/3/bli_sgemm_knl_asm_24x16.c", "target": "obj/x86_64/kernels/knl/3/bli_sgemm_knl_asm_24x16.o", "flags": ["-O3", "-mavx512f", "-mfpmath=sse", "-march=knl", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
 {"compiler": "gcc", "source": "kernels/sandybridge/3/bli_gemm_sandybridge_asm_d8x4.c", "target": "obj/x86_64/kernels/sandybridge/3/bli_gemm_sandybridge_asm_d8x4.o", "flags": ["-O3", "-mavx", "-mfpmath=sse", "-march=sandybridge", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
 {"compiler": "gcc", "source": "kernels/sandybridge/3/bli_gemm_sandybridge_int_d8x4.c", "target": "obj/x86_64/kernels/sandybridge/3/bli_gemm_sandybridge_int_d8x4.o", "flags": ["-O3", "-mavx", "-mfpmath=sse", "-march=sandybridge", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
 {"compiler": "gcc", "source": "kernels/penryn/1/bli_axpyv_penryn_int.c", "target": "obj/x86_64/kernels/penryn/1/bli_axpyv_penryn_int.o", "flags": ["-O3", "-mssse3", "-mfpmath=sse", "-march=core2", "-std=c99"], "macros": ["-D_POSIX_C_SOURCE=200112L", "-DBLIS_VERSION_STRING=\"0.7.0\"", "-DBLIS_IS_BUILDING_LIBRARY"], "include": ["-Iinclude/windows-x86_64", "-I./frame/3/", "-I./frame/ind/ukernels/", "-I./frame/3/", "-I./frame/1m/", "-I./frame/1f/", "-I./frame/1/", "-I./frame/include"]}
-- 
2.39.3 (Apple Git-146)

